<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    <%= title %>
  </title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
    }

    .navbar {
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .card {
      box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
      border: 1px solid rgba(0, 0, 0, 0.125);
      margin-bottom: 1.5rem;
    }

    .stat-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
    }

    .stat-card.success {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }

    .stat-card.warning {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }

    .stat-card.info {
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
      color: #333;
    }

    .stat-number {
      font-size: 2rem;
      font-weight: bold;
    }

    .progress {
      height: 8px;
      border-radius: 4px;
    }

    .status-badge {
      font-size: 0.8rem;
      padding: 0.4rem 0.8rem;
    }

    .job-row:hover {
      background-color: rgba(0, 0, 0, 0.02);
    }

    .refresh-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
    }

    .auto-refresh {
      color: #28a745;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% {
        opacity: 1;
      }

      50% {
        opacity: 0.5;
      }

      100% {
        opacity: 1;
      }
    }

    .table-responsive {
      border-radius: 0.5rem;
      overflow: hidden;
    }

    .navbar-brand {
      font-weight: 600;
    }
  </style>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">
        <i class="fas fa-video me-2"></i>
        Video Transcoding Service
      </a>
      <div class="navbar-nav ms-auto">
        <span class="navbar-text">
          <i class="fas fa-clock me-1"></i>
          <span id="current-time">
            <%= currentTime %>
          </span>
        </span>
      </div>
    </div>
  </nav>

  <div class="container-fluid py-4">
    <%- body %>
  </div>

  <button class="btn btn-primary refresh-btn" onclick="refreshData()" id="refresh-btn">
    <i class="fas fa-sync-alt me-1"></i>
    Refresh
  </button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
  <script>
    let autoRefreshInterval;
    let isAutoRefresh = false;

    function updateTime() {
      document.getElementById('current-time').textContent = new Date().toISOString();
    }

    function refreshData() {
      const btn = document.getElementById('refresh-btn');
      const icon = btn.querySelector('i');

      icon.classList.add('fa-spin');
      btn.disabled = true;

      setTimeout(() => {
        window.location.reload();
      }, 500);
    }

    function toggleAutoRefresh() {
      if (isAutoRefresh) {
        clearInterval(autoRefreshInterval);
        isAutoRefresh = false;
        document.getElementById('refresh-btn').innerHTML = '<i class="fas fa-sync-alt me-1"></i>Refresh';
      } else {
        autoRefreshInterval = setInterval(refreshData, 5000); // Refresh every 5 seconds
        isAutoRefresh = true;
        document.getElementById('refresh-btn').innerHTML = '<i class="fas fa-sync-alt me-1 auto-refresh"></i>Auto';
      }
    }

    setInterval(updateTime, 1000);

    document.getElementById('refresh-btn').addEventListener('dblclick', toggleAutoRefresh);
  </script>
</body>

</html>
